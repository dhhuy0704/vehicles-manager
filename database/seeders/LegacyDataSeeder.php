<?php

namespace Database\Seeders;

use App\Models\Owner;
use App\Models\GasStation;
use App\Models\Vehicle;
use App\Models\User;
use Illuminate\Support\Str;
use App\Models\RefuelRecord;
use Illuminate\Database\Console\Seeds\WithoutModelEvents;
use Illuminate\Database\Seeder;

class LegacyDataSeeder extends Seeder
{
    use WithoutModelEvents;
    
    /**
     * Run the database seeds.
     */
    public function run(): void
    {
        $user = new User();
        $user->id = (string) Str::orderedUuid();
        $user->name = 'Admin';
        $user->password = bcrypt('123456');
        $user->email = 'info@tommydo.ca';
        $user->save();

        // Create owner
        $owner = new Owner();
        $owner->id = (string) Str::orderedUuid();
        $owner->first_name = 'Tommy';
        $owner->last_name = 'Do';
        $owner->email = 'info@tommydo.ca';
        $owner->phone = '4035555555';
        $owner->gender = 'male';
        $owner->save();

        // Create gas stations
        $gs_1 = new GasStation();
        $gs_1->id = (string) Str::orderedUuid();
        $gs_1->name = 'Costco Gasoline Chinook';
        $gs_1->location = '58 Avenue SW, Calgary, AB';
        $gs_1->save();

        $gs_2 = new GasStation();
        $gs_2->id = (string) Str::orderedUuid();
        $gs_2->name = 'Costco Easter Hill';
        $gs_2->location = '75 E Hills Blvd SE, Calgary, AB T2A 6J8';
        $gs_2->save();

        $gs_3 = new GasStation();
        $gs_3->id = (string) Str::orderedUuid();
        $gs_3->name = 'Co-Op Forest Lawn';
        $gs_3->location = '3330 17 Ave SE, Calgary, AB T2A 0P9';
        $gs_3->save();

        $gs_4 = new GasStation();
        $gs_4->id = (string) Str::orderedUuid();
        $gs_4->name = '14 St - 13 Ave Sw';
        $gs_4->location = '14 St - 13 Ave Sw, Calgary, AB';
        $gs_4->save();

        $vehicle = new Vehicle();
        $vehicle->id = (string) Str::orderedUuid();
        $vehicle->type = 'car';
        $vehicle->name = 'My Car';
        $vehicle->manufacturer = 'toyota';
        $vehicle->model = 'Siena';
        $vehicle->year = 2019;
        $vehicle->fuel_capacity = 75.0;
        $vehicle->status = 'active';
        $vehicle->note = 'Bought in 2024, primary vehicle.';
        $vehicle->owner_id = $owner->id;
        $vehicle->save();

        // Create refuel records with actual data - properly formatted and complete
        $refuelRecords = [
            ['2024-01-17 00:00:00', $gs_2->id, 100644, 54.212, 1.20, 65.00],
            ['2024-01-25 00:00:00', $gs_2->id, 100944, 48.17, 1.40, 67.39],
            ['2024-01-31 00:00:00', $gs_2->id, 101274, 44.546, 1.18, 52.52],
            ['2024-02-07 00:00:00', $gs_2->id, 101561, 45.052, 1.24, 55.82],
            ['2024-02-15 00:00:00', $gs_1->id, 101927, 53.918, 1.30, 70.04],
            ['2024-02-19 00:00:00', $gs_1->id, 102348, 51.69, 1.22, 63.01],
            ['2024-02-24 00:00:00', $gs_2->id, 102854, 59.434, 1.29, 76.61],
            ['2024-03-03 00:00:00', $gs_1->id, 103279, 60.783, 1.33, 80.78],
            ['2024-03-07 00:00:00', $gs_2->id, 103579, 49.629, 1.35, 66.95],
            ['2024-03-13 00:00:00', $gs_2->id, 103872, 41.53, 1.40, 58.10],
            ['2024-03-21 00:00:00', $gs_3->id, 104294, 54.806, 1.47, 80.51],
            ['2024-03-24 00:00:00', $gs_2->id, 104504, 32.902, 1.40, 46.03],
            ['2024-03-31 00:00:00', $gs_3->id, 104897, 52.279, 1.55, 80.98],
            ['2024-04-07 00:00:00', $gs_1->id, 105216, 46.717, 1.53, 71.43],
            ['2024-04-13 00:00:00', $gs_1->id, 105613, 54.345, 1.55, 84.18],
            ['2024-04-19 00:00:00', $gs_1->id, 106055, 58.651, 1.58, 92.61],
            ['2024-04-24 00:00:00', $gs_2->id, 106318, 33.756, 1.50, 50.60],
            ['2024-05-03 00:00:00', $gs_2->id, 106638, 47.319, 1.56, 73.77],
            ['2024-05-14 00:00:00', $gs_2->id, 107026, 64.526, 1.51, 97.40],
            ['2024-05-28 00:00:00', $gs_2->id, 107769, 51.159, 1.52, 77.71],
            ['2024-06-12 00:00:00', $gs_2->id, 108671, 58.463, 1.40, 81.79],
            ['2024-06-17 00:00:00', $gs_1->id, 109084, 40.793, 1.40, 57.07],
            ['2024-06-24 00:00:00', $gs_2->id, 109491, 55.39, 1.45, 80.26],
            ['2024-07-04 00:00:00', $gs_2->id, 110262, 52.58, 1.59, 83.55],
            ['2024-07-05 00:00:00', $gs_2->id, 110691, 36.312, 1.75, 63.51],
            ['2024-07-06 00:00:00', $gs_2->id, 111243, 52.501, 1.82, 95.50],
            ['2024-07-08 00:00:00', $gs_2->id, 111505, 35.693, 1.71, 61.00],
            ['2024-07-10 00:00:00', $gs_2->id, 111872, 38.614, 1.66, 64.06],
            ['2024-07-14 00:00:00', $gs_1->id, 112825, 41.338, 1.89, 78.28],
            ['2024-07-21 00:00:00', $gs_2->id, 113205, 51.932, 1.58, 82.00],
            ['2024-08-02 00:00:00', $gs_2->id, 113981, 54.324, 1.65, 89.58],
            ['2024-08-05 00:00:00', $gs_1->id, 114244, 28.741, 1.55, 44.52],
            ['2024-08-10 00:00:00', $gs_2->id, 114609, 42.462, 1.52, 64.50],
            ['2024-08-14 00:00:00', $gs_2->id, 115388, 53.126, 1.53, 81.23],
            ['2024-08-20 00:00:00', $gs_2->id, 115455, 46.402, 1.46, 67.70],
            ['2024-09-01 00:00:00', $gs_1->id, 116342, 55.931, 1.36, 76.01],
            ['2024-09-08 00:00:00', $gs_1->id, 116812, 59.152, 1.38, 81.57],
            ['2024-09-14 00:00:00', $gs_2->id, 117232, 54.071, 1.33, 71.86],
            ['2024-09-22 00:00:00', $gs_2->id, 117755, 61.45, 1.47, 90.27],
            ['2024-09-30 00:00:00', $gs_2->id, 118044, 43.685, 1.59, 69.59],
            ['2024-09-30 00:00:00', $gs_2->id, 118524, 40.804, 1.59, 65.00],
            ['2024-10-05 00:00:00', $gs_2->id, 118976, 50.922, 1.40, 71.24],
            ['2024-10-13 00:00:00', $gs_2->id, 119380, 53.628, 1.47, 78.78],
            ['2024-11-04 00:00:00', $gs_2->id, 120609, 45.721, 1.34, 61.22],
            ['2024-11-16 00:00:00', $gs_2->id, 120998, 58.298, 1.47, 85.64],
            ['2024-11-24 00:00:00', $gs_2->id, 121394, 59.828, 1.40, 83.70],
            ['2024-12-04 00:00:00', $gs_2->id, 121749, 61.008, 1.33, 81.08],
            ['2024-12-10 00:00:00', $gs_2->id, 122050, 40.97, 1.32, 54.04],
            ['2024-12-20 00:00:00', $gs_1->id, 122400, 61.268, 1.46, 89.39],
            ['2024-12-30 00:00:00', $gs_2->id, 122746, 48.28, 1.35, 65.13],
            ['2025-01-07 00:00:00', $gs_2->id, 123103, 58.675, 1.36, 79.74],
            ['2025-01-15 00:00:00', $gs_1->id, 123533, 58.013, 1.38, 80.00],
            ['2025-01-19 00:00:00', $gs_1->id, 123737, 33.489, 1.50, 50.20],
            ['2025-01-27 00:00:00', $gs_2->id, 124094, 56.934, 1.40, 79.65],
            ['2025-02-03 00:00:00', $gs_2->id, 124444, 50.754, 1.50, 76.08],
            ['2025-02-10 00:00:00', $gs_2->id, 124735, 53.428, 1.48, 79.02],
            ['2025-02-17 00:00:00', $gs_2->id, 124882, 33.356, 1.44, 48.00],
            ['2025-02-22 00:00:00', $gs_2->id, 125097, 33.87, 1.43, 48.40],
            ['2025-02-24 00:00:00', $gs_2->id, 125587, 47.434, 1.47, 69.68],
            ['2025-03-07 00:00:00', $gs_2->id, 125994, 60.93, 1.41, 85.85],
            ['2025-03-14 00:00:00', $gs_2->id, 126270, 41.424, 1.37, 56.71],
            ['2025-03-18 00:00:00', $gs_2->id, 126500, 34.932, 1.46, 51.00],
            ['2025-03-24 00:00:00', $gs_2->id, 126771, 38.654, 1.45, 56.01],
            ['2025-04-09 00:00:00', $gs_2->id, 127844, 56.714, 1.27, 71.97],
            ['2025-04-28 00:00:00', $gs_2->id, 128556, 50.853, 1.23, 62.60],
            ['2025-04-30 00:00:00', $gs_2->id, 128782, 23.562, 1.18, 27.78],
            ['2025-05-05 00:00:00', $gs_2->id, 129115, 44.32, 1.17, 51.81],
            ['2025-05-11 00:00:00', $gs_2->id, 129325, 31.6, 1.22, 38.52],
            ['2025-05-25 00:00:00', $gs_2->id, 130263, 59.915, 1.29, 77.23],
            ['2025-05-30 00:00:00', $gs_2->id, 130540, 39.333, 1.29, 50.70],
            ['2025-06-06 00:00:00', $gs_2->id, 130957, 55.597, 1.35, 75.00],
            ['2025-06-14 00:00:00', $gs_2->id, 131340, 55.556, 1.27, 70.50],
            ['2025-06-19 00:00:00', $gs_2->id, 131559, 30.162, 1.30, 39.18],
            ['2025-06-28 00:00:00', $gs_2->id, 131979, 54.347, 1.54, 83.64],
            ['2025-07-04 00:00:00', $gs_4->id, 132211, 33.056, 1.30, 42.94],
            ['2025-07-13 00:00:00', $gs_1->id, 132956, 49.529, 1.20, 49.53],
            ['2025-07-19 00:00:00', $gs_1->id, 133256, 40.906, 1.37, 56.00],
            ['2025-07-19 00:00:00', $gs_1->id, 133658, 33.75, 1.20, 40.50],
            ['2025-07-24 00:00:00', $gs_1->id, 134169, 57.212, 1.26, 72.03],
            ['2025-08-05 00:00:00', $gs_1->id, 134579, 53.445, 1.20, 64.08],
            ['2025-08-13 00:00:00', $gs_2->id, 134944, 50.654, 1.24, 62.76],
            ['2025-08-21 00:00:00', $gs_2->id, 135288, 50.654, 1.30, 66.00],
            ['2025-08-29 00:00:00', $gs_2->id, 135707, 54.665, 1.30, 71.01],
            ['2025-09-07 00:00:00', $gs_2->id, 136186, 52.833, 1.36, 71.80],
            ['2025-09-13 00:00:00', $gs_1->id, 136505, 43.938, 1.23, 54.00],
            ['2025-09-18 00:00:00', $gs_1->id, 136869, 40.392, 1.20, 48.43],
            ['2025-09-27 00:00:00', $gs_1->id, 137266, 52.836, 1.20, 63.35],
            ['2025-09-30 00:00:00', $gs_1->id, 137669, 41.244, 1.36, 56.05],
            ['2025-10-07 00:00:00', $gs_1->id, 138051, 50.475, 1.18, 59.51],
            ['2025-10-14 00:00:00', $gs_1->id, 138435, 44.637, 1.20, 53.52],
            ['2025-10-19 00:00:00', $gs_1->id, 138698, 40.434, 1.13, 45.65]
        ];

        foreach ($refuelRecords as [$date, $gasStationId, $odometer, $litres, $pricePerUnit, $cost]) {
            $RR = new RefuelRecord();
            $RR->id = (string) Str::orderedUuid();
            $RR->date = substr($date, 0, 10);   // Extract just the date part
            $RR->time = substr($date, 11, 8);   // Extract just the time part
            $RR->odometer = $odometer;
            $RR->price_per_unit = $pricePerUnit;
            $RR->total_cost = $cost;
            $RR->amount = $litres;
            $RR->vehicle_id = $vehicle->id;
            $RR->gas_station_id = $gasStationId;
            $RR->save();
        }
    }
}
